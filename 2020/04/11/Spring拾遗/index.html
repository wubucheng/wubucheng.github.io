<!DOCTYPE html>
<html>
<head>
    

    
<!-- Tencent Speed -->
<script>var _speedMark = new Date()</script>
<!-- End Tencent Speed -->
<!-- Tencent Analysis -->
<script async src="//tajs.qq.com/stats?sId=66466426"></script>
<!-- End Tencent Analysis -->


    



    <meta charset="utf-8">
    
    
    
    
    <title>Spring拾遗 | 无编程 | wubc的个人博客，公众号：后端随笔</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Spring,知识总结">
    <meta name="description" content="一、spring结构                                                                                             spring结构               主要有核心层、数据访问层、web层、以及AOP、Aspects、Instrumentation组成 核心层：  Beans: 包括了控制反转、依赖注">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring拾遗">
<meta property="og:url" content="wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/index.html">
<meta property="og:site_name" content="无编程">
<meta property="og:description" content="一、spring结构                                                                                             spring结构               主要有核心层、数据访问层、web层、以及AOP、Aspects、Instrumentation组成 核心层：  Beans: 包括了控制反转、依赖注">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.manongjc.com/images/jiaochen/spring_architecture.png">
<meta property="og:image" content="https://i.loli.net/2020/03/25/YTnGB1DvaFbjeZ2.png">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d7d0416f5.jpg">
<meta property="article:published_time" content="2020-04-11T10:09:22.000Z">
<meta property="article:modified_time" content="2020-04-11T13:09:11.641Z">
<meta property="article:author" content="wubc">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="知识总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.manongjc.com/images/jiaochen/spring_architecture.png">
    
        <link rel="alternate" type="application/atom+xml" title="无编程" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">wubc</h5>
          <a href="mailto:hi@wbc.ink" title="hi@wbc.ink" class="mail">hi@wbc.ink</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/wubucheng" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://dh.wubc.me" target="_blank" >
                <i class="icon icon-lg icon-location-arrow"></i>
                无编程导航网
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://juejin.im/user/5e5b5255f265da573b0db081" target="_blank" >
                <i class="icon icon-lg icon-link"></i>
                掘金
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/aboutme"  >
                <i class="icon icon-lg icon-smile"></i>
                关于我
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Spring拾遗</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Spring拾遗</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-11T10:09:22.000Z" itemprop="datePublished" class="page-time">
  2020-04-11
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Spring/">Spring</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、spring结构"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、spring结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二、工作原理"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、工作原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三、注解"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、注解</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#四、bean的生命周期（重点）"><span class="post-toc-number">4.</span> <span class="post-toc-text">四、bean的生命周期（重点）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#五、AOP"><span class="post-toc-number">5.</span> <span class="post-toc-text">五、AOP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#切面Aspect"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">切面Aspect</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#spring通知类型"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">spring通知类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现方式"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">实现方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#六、IOC"><span class="post-toc-number">6.</span> <span class="post-toc-text">六、IOC</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作用"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">作用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#支持的功能"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">支持的功能</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#七、BeanFactory-和-ApplicationContext区别"><span class="post-toc-number">7.</span> <span class="post-toc-text">七、BeanFactory 和 ApplicationContext区别</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#八、依赖注入"><span class="post-toc-number">8.</span> <span class="post-toc-text">八、依赖注入</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原则"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">原则</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#优势"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">优势</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现方式-1"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">实现方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#九、SpringBean"><span class="post-toc-number">9.</span> <span class="post-toc-text">九、SpringBean</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置元数据"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">配置元数据</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作用域"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">作用域</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#线程安全性"><span class="post-toc-number">9.3.</span> <span class="post-toc-text">线程安全性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#生命周期重要的方法"><span class="post-toc-number">9.4.</span> <span class="post-toc-text">生命周期重要的方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十、自动装配"><span class="post-toc-number">10.</span> <span class="post-toc-text">十、自动装配</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#自动装配的方式"><span class="post-toc-number">10.0.1.</span> <span class="post-toc-text">自动装配的方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#局限性"><span class="post-toc-number">10.0.2.</span> <span class="post-toc-text">局限性</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十一、Spring数据访问"><span class="post-toc-number">11.</span> <span class="post-toc-text">十一、Spring数据访问</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#spring-dao的作用"><span class="post-toc-number">11.1.</span> <span class="post-toc-text">spring dao的作用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#jdbc-template"><span class="post-toc-number">11.2.</span> <span class="post-toc-text">jdbc template</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Spring事务"><span class="post-toc-number">11.3.</span> <span class="post-toc-text">Spring事务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实现方式类型："><span class="post-toc-number">11.3.1.</span> <span class="post-toc-text">实现方式类型：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事务传播行为："><span class="post-toc-number">11.3.2.</span> <span class="post-toc-text">事务传播行为：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事务隔离"><span class="post-toc-number">11.3.3.</span> <span class="post-toc-text">事务隔离</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Spring拾遗"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Spring拾遗</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-11 18:09:22" datetime="2020-04-11T10:09:22.000Z"  itemprop="datePublished">2020-04-11</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Spring/">Spring</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="一、spring结构"><a href="#一、spring结构" class="headerlink" title="一、spring结构"></a>一、spring结构</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.manongjc.com/images/jiaochen/spring_architecture.png" alt="spring结构" title="">
                </div>
                <div class="image-caption">spring结构</div>
            </figure>

<p>主要有核心层、数据访问层、web层、以及AOP、Aspects、Instrumentation组成</p>
<p>核心层：</p>
<ul>
<li>Beans: 包括了控制反转、依赖注入。</li>
<li>core： 封装了最底层的部分，包括资源访问、类型转换等一些工具类</li>
<li>context: 资源绑定、数据验证、国际化、容器生命周期、事件传播等</li>
<li>expression language（EL）：EL表达式语言支持</li>
</ul>
<h2 id="二、工作原理"><a href="#二、工作原理" class="headerlink" title="二、工作原理"></a>二、工作原理</h2><p>先上图：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2020/03/25/YTnGB1DvaFbjeZ2.png" alt="springMVC工作流程图.png" title="">
                </div>
                <div class="image-caption">springMVC工作流程图.png</div>
            </figure>




<p><strong>说明</strong></p>
<ul>
<li><p>用户向服务器发送请求，请求被 springMVC 前端控制器 <strong>DispatchServlet</strong> 捕获；</p>
</li>
<li><p>DispatcherServle 对请求 URL 进行解析，得到请求资源标识符（URL），然后根据该 URL 调用 <strong>HandlerMapping</strong>，将请求映射到处理<strong>HandlerExcutionChain</strong>；</p>
</li>
<li><p>DispatchServlet 根据获得 Handler 选择一个合适的 HandlerAdapter 适配器处理；</p>
</li>
<li><p>HandlerAdapter 调用具体的处理器（controller）</p>
</li>
<li><p>Handler 对数据处理完成以后将返回一个 <strong>ModelAndView（）</strong> 对象给 DisPatchServlet;</p>
</li>
<li><p>Handler 返回的 ModelAndView()只是一个逻辑视图并不是一个正式的视图，DispatcherSevlet 通过<strong>ViewResolver</strong> 试图解析器将逻辑视图转化为真正的视图 View;</p>
</li>
<li><p>DispatcherServle 通过 model 解析出 ModelAndView()中的参数进行解析最终展现出完整的 view 并返回给客户端</p>
</li>
</ul>
<h2 id="三、注解"><a href="#三、注解" class="headerlink" title="三、注解"></a>三、注解</h2><p>xml定义会覆盖注解？</p>
<p>在配置文件中通过&lt;context:annotation-config /&gt;来开启注解装配</p>
<h2 id="四、bean的生命周期（重点）"><a href="#四、bean的生命周期（重点）" class="headerlink" title="四、bean的生命周期（重点）"></a>四、bean的生命周期（重点）</h2><p>参考文章：<a href="https://juejin.im/post/5daced865188255a270a0de6" target="_blank" rel="noopener">https://juejin.im/post/5daced865188255a270a0de6</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/05/08/5cd1d7d0416f5.jpg" alt="bean生命周期流程" title="">
                </div>
                <div class="image-caption">bean生命周期流程</div>
            </figure>

<ul>
<li><p>Bean容器在配置文件中找到Spring Bean的定义。</p>
</li>
<li><p>Bean容器使用Java Reflection API创建Bean的实例</p>
</li>
<li><p>如果声明了任何属性，声明的属性会被设置。如果属性本身是Bean，则将对其进行解析和设置。</p>
</li>
<li><p>如果Bean类实现BeanNameAware接口，则将通过传递Bean的名称来调用setBeanName()方法。</p>
</li>
<li><p>如果Bean类实现BeanClassLoaderAware接口，则将通过传递加载此Bean的ClassLoader对象的实例来调用setBeanClassLoader()方法。</p>
</li>
<li><p>如果Bean类实现BeanFactoryAware接口，则将通过传递BeanFactory对象的实例来调用setBeanFactory()方法。</p>
</li>
<li><p>如果有任何与BeanFactory关联的BeanPostProcessors对象已加载Bean，则将在设置Bean属性之前调用postProcessBeforeInitialization()方法。</p>
</li>
<li><p>如果Bean类实现了InitializingBean接口，则在设置了配置文件中定义的所有Bean属性后，将调用afterPropertiesSet()方法。</p>
</li>
<li><p>如果配置文件中的Bean定义包含init-method属性，则该属性的值将解析为Bean类中的方法名称，并将调用该方法。</p>
</li>
<li><p>如果为Bean Factory对象附加了任何Bean 后置处理器，则将调用postProcessAfterInitialization()方法。</p>
</li>
<li><p>如果Bean类实现DisposableBean接口，则当Application不再需要Bean引用时，将调用destroy()方法。</p>
</li>
<li><p>如果配置文件中的Bean定义包含destroy-method属性，那么将调用Bean类中的相应方法定义。</p>
</li>
</ul>
<h2 id="五、AOP"><a href="#五、AOP" class="headerlink" title="五、AOP"></a>五、AOP</h2><p>面向切面编程。</p>
<ul>
<li>切面：通知和切点的结合</li>
<li>连接点：应用执行过程中能够插入切面的一个点</li>
<li>通知（Advice）：切面的工作被称为通知</li>
<li>切入点（Pointcut）：切点的定义会匹配通知所要织入的一个或多个连接点</li>
<li>织入（Weaving）：织入是把切面应用到目标对象并创建新的代理对象的过程</li>
</ul>
<p>关注点（concern）是应用中一个模块的行为，横切关注点（cross-cutting concern）是一个关注点，此关注点是整个应用都会使用的功能。</p>
<p><strong>spring只支持方法级别的连接点</strong></p>
<h3 id="切面Aspect"><a href="#切面Aspect" class="headerlink" title="切面Aspect"></a>切面Aspect</h3><blockquote>
<p>由切入点和通知组成，包含了横切逻辑、连接点定义</p>
</blockquote>
<p><strong>实现方法</strong>：</p>
<ul>
<li>基于XML Schema</li>
<li>基于@Aspect注解</li>
</ul>
<h3 id="spring通知类型"><a href="#spring通知类型" class="headerlink" title="spring通知类型"></a>spring通知类型</h3><ul>
<li>before：前置通知，在方法被调用前调用通知功能</li>
<li>after：后置通知，方法完成后调用通知</li>
<li>after-returning：在目标方法成功执行后调用通知</li>
<li>after-throwing：方法抛出异常后调用通知</li>
<li>around：目标方法调用前后都调用通知</li>
</ul>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><ul>
<li>静态代理：AspectJ，编译时生成AOP代理类，将切面织入了字节码</li>
<li>动态代理：Spring AOP，不修改字节码，临时生成AOP对象</li>
</ul>
<h2 id="六、IOC"><a href="#六、IOC" class="headerlink" title="六、IOC"></a>六、IOC</h2><blockquote>
<p>将操作对象的调用权交给了容器，通过容器来实现对象组件的装配和管理。实现原理是工厂模式加反射机制</p>
</blockquote>
<p>优点：</p>
<ul>
<li>减少代码量。</li>
<li>使应用容易测试，单元测试不再需要单例和JNDI查找机制。</li>
<li>最小的代价和最小的侵入性使松散耦合得以实现</li>
</ul>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li>便于管理对象的创建和依赖关系的维护</li>
<li>托管了类的产生过程</li>
</ul>
<h3 id="支持的功能"><a href="#支持的功能" class="headerlink" title="支持的功能"></a>支持的功能</h3><ul>
<li>依赖注入</li>
<li>依赖检查</li>
<li>自动装配</li>
</ul>
<h2 id="七、BeanFactory-和-ApplicationContext区别"><a href="#七、BeanFactory-和-ApplicationContext区别" class="headerlink" title="七、BeanFactory 和 ApplicationContext区别"></a>七、BeanFactory 和 ApplicationContext区别</h2><p>ApplicationContext是BeanFactory的子接口</p>
<p>与BeanFactory相比较，ApplicationContext增加了一下功能：</p>
<ul>
<li>继承MessageSource，因此支持国际化。</li>
<li>统一的资源文件访问方式。</li>
<li>提供在监听器中注册bean的事件。</li>
<li>支持同时加载多个配置文件。</li>
<li>载入多个（有继承关系）上下文 ，使得每一个上下文都专注于一个特定的层次，比如应用的web层</li>
</ul>
<p>BeanFactory是使用延迟加载来注入bean,因此如果没有调用getBean将可能不会发现异常。而ApplicationContext一次性创建了所有的bean。BeanFactory通常以编程的方式被创建，ApplicationContext还能以声明的方式创建，如使用ContextLoader。</p>
<h2 id="八、依赖注入"><a href="#八、依赖注入" class="headerlink" title="八、依赖注入"></a>八、依赖注入</h2><blockquote>
<p>组件之间的依赖关系有容器在应用系统运行期决定，由容器动态地将某种依赖关系的目标对象实例注入到应用系统中的各个关联的组件之中。</p>
</blockquote>
<h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><p>应用组件不应该负责查找资源或者其他依赖的协作对象，容器全权负责组件的装配</p>
<h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><ul>
<li>查找定位操作与应用代码无关，交由容器管理</li>
<li>不依赖容器API，可以在容器外使用应用对象</li>
</ul>
<h3 id="实现方式-1"><a href="#实现方式-1" class="headerlink" title="实现方式"></a>实现方式</h3><ul>
<li><del>接口注入</del>,spring4已弃用</li>
<li>构造器注入</li>
<li>setter方法注入</li>
</ul>
<h2 id="九、SpringBean"><a href="#九、SpringBean" class="headerlink" title="九、SpringBean"></a>九、SpringBean</h2><p>bean定义包含配置元数据、生命周期详情、依赖</p>
<h3 id="配置元数据"><a href="#配置元数据" class="headerlink" title="配置元数据"></a>配置元数据</h3><ul>
<li>XML配置文件</li>
<li>注解配置</li>
<li>基于Java的配置</li>
</ul>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul>
<li>singleton：每个bean在容器中只存在一个实例</li>
<li>prototype：有多个实例</li>
<li>request: 每次请求都会创建一个bean，该作用域仅在基于web的Spring ApplicationContext情形下有效。</li>
<li>session：每一个session中，一个bean对应一个实例，该作用域仅在基于web的Spring ApplicationContext情形下有效。</li>
<li>global-session：以session相比，这是一个全局的</li>
</ul>
<h3 id="线程安全性"><a href="#线程安全性" class="headerlink" title="线程安全性"></a>线程安全性</h3><p>singleton不是线程安全的，prototype可以保证线程安全；如果bean是无状态的，bean也是安全的。</p>
<p>ps: 无状态: 由于没有特定的用户，那么也就不能保持某一用户的状态，所以叫无状态bean</p>
<p><strong>多线程下处理并发问题</strong></p>
<ul>
<li>ThreadLocal：每个线程都拥有自己变量副本</li>
<li>线程同步机制：只有一份变量，每个线程访问前需要获取锁</li>
</ul>
<h3 id="生命周期重要的方法"><a href="#生命周期重要的方法" class="headerlink" title="生命周期重要的方法"></a>生命周期重要的方法</h3><ul>
<li>setUp：在容器加载bean时被调用</li>
<li>teardown： 在容器写在类的时候被调用</li>
</ul>
<h2 id="十、自动装配"><a href="#十、自动装配" class="headerlink" title="十、自动装配"></a>十、自动装配</h2><blockquote>
<p>Spring通过BeanFactory中注入的方式自动处理bean之间的依赖关系</p>
</blockquote>
<h4 id="自动装配的方式"><a href="#自动装配的方式" class="headerlink" title="自动装配的方式"></a>自动装配的方式</h4><ul>
<li>no: 默认的方式，不进行自动装配，通过手动ref来装配bean</li>
<li>byType：通过参数的数据类型进行自动装配</li>
<li>byName: 通过bean的名称进行自动装配</li>
<li>constructor: 通过构造函数进行装配</li>
<li>audodetect: 自动探测，优先使用construct，否则使用byType</li>
</ul>
<p>spring还用到 <strong>@Autowired</strong> 的注解方式进行自动装配，使用前需在配置文件中配置 <strong>&lt;context:annotation-config /&gt;</strong><br>属性。<br>它的原理是：利用AutowiredAnnotationBeanPostProcessor后置处理器，当容器扫描到用@Autowired注解修饰的bean时，会在容器中查询是否有这个bean，有且只有一个那么将会返回，而有多个，则会通过名称去查找，查询不到则抛出异常。</p>
<h4 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h4><ul>
<li>重写：<em>使用配置定义依赖，则需重写自动装配？</em></li>
<li>不能自动装配基本类型</li>
<li>模糊：不如显示装配精确</li>
</ul>
<h2 id="十一、Spring数据访问"><a href="#十一、Spring数据访问" class="headerlink" title="十一、Spring数据访问"></a>十一、Spring数据访问</h2><h3 id="spring-dao的作用"><a href="#spring-dao的作用" class="headerlink" title="spring dao的作用"></a>spring dao的作用</h3><blockquote>
<p>使jdbc等数据访问即使更容易以一种统一的方式工作</p>
</blockquote>
<h3 id="jdbc-template"><a href="#jdbc-template" class="headerlink" title="jdbc template"></a>jdbc template</h3><blockquote>
<p>提供便利的方法将数据库数据转换为基本数据类型和对象、执行数据库操作语句、提供数据错误处理等</p>
</blockquote>
<h3 id="Spring事务"><a href="#Spring事务" class="headerlink" title="Spring事务"></a>Spring事务</h3><h4 id="实现方式类型："><a href="#实现方式类型：" class="headerlink" title="实现方式类型："></a>实现方式类型：</h4><ul>
<li>编程式i：开发人员通过编程的方式进行事务的管理，灵活但是难维护</li>
<li>声明式：通过注解和XML配置来管理事务，将业务代码是事务管理放分离</li>
</ul>
<h4 id="事务传播行为："><a href="#事务传播行为：" class="headerlink" title="事务传播行为："></a>事务传播行为：</h4><ul>
<li>PROPAGATION_REQUIRED:存在事务则加入，否则创建一个新的事务</li>
<li>PROPAGATION_SUPPORT:  存在事务则加入，否则以非事务执行</li>
<li>PROPAGATION_MANDATORY:存在事务则加入，否则抛出异常</li>
<li>PROPAGATION_REQUIRES_NEW: 无论当前是否存在事务，都创建事务</li>
<li>PROPAGATION_NEVER: 以非事务方式执行，当前存在事务则抛出异常</li>
<li>PROPAGATION_NESTED: 当前存在事务，则在嵌套事务中执行，没有则按REQUIRED属性执行</li>
</ul>
<h4 id="事务隔离"><a href="#事务隔离" class="headerlink" title="事务隔离"></a>事务隔离</h4><ul>
<li>ISOLATION_DEFAULT: 默认，使用数据库隔离机制</li>
<li>ISOLATION_READ_UNCOMMITTED: 未提交读，事务未提交前就可以被其他事务读取，会出现幻读、脏读、不可重复读问题</li>
<li>ISOLATION_READ_COMMIT:一个事务被提交后才能被其他事务读取，会出现幻读、不可重复读</li>
<li>ISOLATION_REPEATABLE_READ:可重复读，多次读取同一个数据都是一致的</li>
<li>ISOLATION_SERIALIABLE:序列化，隔离级别最高，可防止上面出现的问题</li>
</ul>
<p>ps: <strong>脏读、不可重复读、幻读的概念</strong></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2020-04-11T13:09:11.641Z" itemprop="dateUpdated">2020-04-11 21:09:11</time>
</span><br>


        
        原始连接：<a href="/2020/04/11/Spring%E6%8B%BE%E9%81%97/" target="_blank" rel="external">wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/</a>
        
    </div>
    
    <footer>
        <a href="wubc.me">
            <img src="/img/avatar.jpg" alt="wubc">
            wubc
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" rel="tag">知识总结</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&title=《Spring拾遗》 — 无编程&pic=wubc.me/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&title=《Spring拾遗》 — 无编程&source=技术、生活、工作" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Spring拾遗》 — 无编程&url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&via=wubc.me" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/04/28/zookeeper%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">zookeeper知识总结</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/04/07/Redis%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Redis知识总结</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢支持
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>wubc &copy; 2017 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&title=《Spring拾遗》 — 无编程&pic=wubc.me/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&title=《Spring拾遗》 — 无编程&source=技术、生活、工作" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Spring拾遗》 — 无编程&url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/&via=wubc.me" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=wubc.me/2020/04/11/Spring%E6%8B%BE%E9%81%97/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3ay5LaMBAF0Pn/nyZVWWXB2PeqnUmQjlYuDEaHRaN+fH3F6/V7JdfJ3T9fv/6uhxcGBsbHMl6X6/o918/JN9d+75unYWBgHMBIgux1SE0+lTzn+vnfvo6BgYERhNckyLbPwcDAwJgw8oT2+rN58MXAwMCYHN3mKeuP5uIYGBgfyHi2MfDs9T/rb2BgYPw3jFe52jC91jaod4WBgbE1oy36f7etSWrahtfihIuBgbER42+kqdeDYkkiupiyYmBgbMfIlc8eDVv2zV0MDIzDGG2TIElEJ43PKFhjYGBszUjCXNt0nA9bjNJXDAyMrRntx9Zgkyff7A0DA2NrRl6sT4JyezdJa/M/BgwMjF0ZbUo5PxS257qoC4CBgbEpY62gNinGtUW0omqIgYGxKSM/fuVBuQ2jSYJaj1xgYGBsxJgcyJKAu3a3HR3DwMA4jZEH3Plhbo305kfBwMDYmpGPXLStxLUNjZJYDAyMrRnJ6EP76Lwx0JbnbmZGMDAwtmPMS/yTd7ZN0JsTLgYGxmGMtXL/pIXZwqKAi4GBsQUjX0l4nQxwrO0BAwPjBMarXGsDXsn12g+BgYFxAmMecPNjYl7Uy68xMDDOYay1GJNkMh/mGHU2MDAwjmE8FQRbZNvsvJkWwcDAOJ7RJrpJsJ4U494cDTEwMDDKjbZlsnYEDQMD4zTGJImdVPWSkY7o0ImBgbE1Yz5s0YbatWPiqLOBgYHxqYxfBHRb0fmrwpoAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'wubc的个人博客';
            clearTimeout(titleTime);
        } else {
            document.title = '无编程';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
